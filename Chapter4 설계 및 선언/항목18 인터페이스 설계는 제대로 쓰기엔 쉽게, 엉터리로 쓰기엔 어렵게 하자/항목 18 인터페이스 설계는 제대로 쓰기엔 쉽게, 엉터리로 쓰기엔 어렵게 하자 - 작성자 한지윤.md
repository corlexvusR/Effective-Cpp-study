# ν•­λ© 18: μΈν„°νμ΄μ¤ μ„¤κ³„λ” μ λ€λ΅ μ“°κΈ°μ—” μ‰½κ², μ—‰ν„°λ¦¬λ΅ μ“°κΈ°μ—” μ–΄λ µκ² ν•μ - μ‘μ„±μ: ν•μ§€μ¤

<aside>
π”

# μ΄κ²ƒλ§μ€ μμ§€λ§μ!

- μΆ‹μ€ μΈν„°νμ΄μ¤λ” μ λ€λ΅ μ“°κΈ°μ— μ‰¬μ°λ©° μ—‰ν„°λ¦¬λ΅ μ“°κΈ°μ— μ–΄λ µμµλ‹λ‹¤.
μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤λ•λ” μ΄ νΉμ„±μ„ μ§€λ‹ μ μλ„λ΅ κ³ λ―Όν•κ³  λ κ³ λ―Όν•©μ‹λ‹¤.
- μΈν„°νμ΄μ¤μ μ¬λ°”λ¥Έ μ‚¬μ©μ„ μ΄λ„λ” λ°©λ²•μΌλ΅λ” μΈν„°νμ΄μ¤ μ‚¬μ΄μ μΌκ΄€μ„± μ΅μ•„μ£ΌκΈ°, κ·Έλ¦¬κ³  κΈ°λ³Έμ κ³µ νƒ€μ…κ³Όμ λ™μ‘ νΈν™μ„± μ μ§€ν•κΈ°κ°€ μμµλ‹λ‹¤.
- μ‚¬μ©μμ μ‹¤μλ¥Ό λ°©μ§€ν•λ” λ°©λ²•μΌλ΅λ” μƒλ΅μ΄ νƒ€μ… λ§λ“¤κΈ°, νƒ€μ…μ— λ€ν• μ—°μ‚°μ„ μ ν•ν•κΈ°, κ°μ²΄μ κ°’μ— λ€ν•΄ μ μ•½ κ±ΈκΈ°, μμ› κ΄€λ¦¬ μ‘μ—…μ„ μ‚¬μ©μ μ±…μ„μΌλ΅ λ†“μ§€ μ•κΈ°κ°€ μμµλ‹λ‹¤.
- `tr1::shared_ptr` μ€ μ‚¬μ©μ μ •μ μ‚­μ μλ¥Ό μ§€μ›ν•©λ‹λ‹¤. μ΄ νΉμ§• λ•λ¬Έμ— `tr1::shared_ptr` μ€ κµμ°¨ DLL λ¬Έμ λ¥Ό λ§‰μ•„ μ£Όλ©°, λ®¤ν…μ¤ λ“±μ„ μλ™μΌλ΅ μ κΈ ν•΄μ ν•λ” λ° μ“Έ μ μμµλ‹λ‹¤.
</aside>

---

# π“ μΈν„°νμ΄μ¤λ€ λ¬΄μ—‡μΈκ°€?

### π© **μ •μ**

- κ°μ²΄μ§€ν–¥ ν”„λ΅κ·Έλλ°(OOP)μ—μ„ μΈν„°νμ΄μ¤λ” μ–΄λ–¤ κΈ°λ¥μ„ μ κ³µν• μ§€μ— λ€ν• μ•½μ†
- μ¦‰, κµ¬ν„μ€ λΉΌκ³  μ™Έλ¶€μ— λ³΄μ—¬μ¤„ `ν•¨μ μ΄λ¦„`, `μ…λ ¥` , `μ¶λ ¥` λ§ μ •μν• κ²ƒ
- μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ **μ΄ κ°μ²΄λ” μ΄λ° κΈ°λ¥μ„ μ“Έ μ μλ‹¤** λΌλ”κ±Έ λ³΄μ¥ν•΄μ¤λ‹λ‹¤

μ‚¬μ‹¤ C++μ—μ„ interface ν‚¤μ›λ“λ” μ—†μ§€λ§, (Javaμ—λ” μκ³  κ°λ…λ§ λ”°μ¨κ±°λΌκ³  ν•©λ‹λ‹¤.)
μ¶”μƒ ν΄λμ¤ + μμ κ°€μƒ ν•¨μλ΅ μΈν„°νμ΄μ¤λ¥Ό ν‘ν„ν•©λ‹λ‹¤.

### π© **ν¬ν•¨λλ” κ²ƒ**

- ν΄λμ¤μ `public` λ©¤λ²„ν•¨μ
- ν•¨μμ λ§¤κ°λ³€μμ λ°ν™ νƒ€μ…
- μƒμ† μ‹ μ κ³µλλ” `μμ κ°€μƒ ν•¨μ`
    - `μμ λ„£μ–΄μ•Όν•¨`
- λΌμ΄λΈλ¬λ¦¬μ—μ„ μ κ³µν•λ” API
- κ°λ…μ •λ¦¬
    - λ§¤κ°λ³€μ = ν•¨μ μ…λ ¥ κ°’
    - λ°ν™ νƒ€μ… = ν•¨μ μ¶λ ¥κ°’
    - μ¶”μƒ λ©”μ„λ“ = κµ¬ν„μ΄ μ—†λ” ν•¨μ β†’ μμ‹ ν΄λμ¤κ°€ λ°λ“μ‹ κµ¬ν„ν•΄μ•Όν•¨
    - μΈν„°νμ΄μ¤ = μƒμ†λ°›μ€ ν΄λμ¤μ—μ„ μ¶”μƒ λ©”μ„λ“λ¥Ό μ¤λ²„λΌμ΄λ“ν•΄μ•Όλ§ μ‚¬μ© κ°€λ¥

μ¦‰β€¦ μΈν„°νμ΄μ¤λ” μ‚¬μ©μκ°€ λ³΄λ” `κ²‰λ¨μµ` μ— ν•΄λ‹Ήν•©λ‹λ‹¤!

---

# π“ μΈν„°νμ΄μ¤λ¥Ό κ°λ°ν•λ ¤λ©΄β€¦

μ΄μƒμ μΌλ΅λ” μ–΄λ–¤ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν–μ„ λ• μ‚¬μ©μκ°€ μ›ν•λ” λ€λ΅ λ™μ‘ν•μ§€ μ•λ”λ‹¤λ©΄ κ·Έ μ½”λ“λ” μ»΄νμΌλμ§€ μ•μ•„μ•Όν•λ©°, λ§μΌ κ·Έ μ½”λ“κ°€ μ»΄νμΌ λλ‹¤λ©΄ μ‚¬μ©μκ°€ μ›ν•λ”λ€λ΅ λ™μ‘ν•΄μ•Ό ν•  κ²ƒ μ…λ‹λ‹¤.

μ—¬λ¬λ¶„μ΄ μΈν„°νμ΄μ¤λ¥Ό κ°λ°ν•κ² λλ‹¤λ©΄ **μ‚¬μ©μκ°€ μ €μ§€λ¥Ό λ§ν• μ‹¤μμ μΆ…λ¥**λ¥Ό λ¨Έλ¦¬μ— λ„£μ–΄λ‘κ³  μμ–΄μ•Ό ν•©λ‹λ‹¤.

### π© μμ  μ½”λ“

```cpp
class Date
{
public:
  Data(int month, int day, int year);
  ...
}
```

μ²« μΈμƒμ΄ κ·Έλ¦¬ λ‚μμ§€ μ•μ€ μΈν„°νμ΄μ¤ μ…λ‹λ‹¤.
ν•μ§€λ§, μ—¬κΈ°μ„ **μ‚¬μ©μκ°€ μ‰½κ² μ €μ§€λ¥Ό μ μλ” μ¤λ¥**κ°€ μ μ–΄λ„ λ‘κ°μμµλ‹λ‹¤.

1. λ§¤κ° λ³€μμ μμ„κ°€ μλ»λ  μ—¬μ§€κ°€ μμµλ‹λ‹¤.
    
    ```cpp
    // Date(month, day, year)
    Date d(30, 3, 1995); // β€3, 30β€μ΄μ–΄μ•Ό ν•λ”λ°, β€30, 3β€μ„ λ„£μ—μµλ‹λ‹¤.
    ```
    
2. μ›”κ³Ό μΌμ— ν•΄λ‹Ήν•λ” μ«μκ°€ μ–΄μ΄μ—†λ” μ«μμΌ μ μμµλ‹λ‹¤.
    
    ```cpp
    // Date(month, day, year)
    Date d(3, 40, 1995); // β€3, 30β€μ΄μ–΄μ•Ό ν•λ”λ°, β€3, 40β€μ„ λ„£μ—μµλ‹λ‹¤.
    ```
    

**μƒλ΅μ΄ νƒ€μ…**μ„ λ“¤μ—¬μ™€ μΈν„°νμ΄μ¤λ¥Ό κ°•ν™”ν•λ©΄ μƒλ‹Ήμμ μ‚¬μ©μ μ‹¤μλ¥Ό λ§‰μ„ μ μμµλ‹λ‹¤.
λ°”λ΅ `νƒ€μ… μ‹μ¤ν…`μ„ λ§λ“¤μ–΄, κ°„λ‹¨ν• `λ©νΌ(wrapper) νƒ€μ…`μ„ κ°κ° λ§λ“¤κ³  μ΄ νƒ€μ…μ„ Date μƒμ„±μ μ•μ— λ‘ μ μμµλ‹λ‹¤.

### π© 1. **μΈν„°νμ΄μ¤λ¥Ό κ°•ν™”ν•κΈ° μ„ν• μƒλ΅μ΄ νƒ€μ… μ •μ**

```cpp
struct Day {
  explicit Day(int d) :
    val(d)  {}
  int val;
};
```

```cpp
struct Month {
  explicit Month(int m) :
    val(m)  {}
  int val;
};
```

```cpp
struct Year {
  explicit Year(int y) :
    val(y)  {}
  int val;
};
```

```cpp
class Date
{
public:
  Data(const Month& m, const Day& d, const Year& y);
  ...
}
Date (30, 3, 1995);                   // μ—λ¬! νƒ€μ…μ΄ ν‹€λ Έμµλ‹λ‹¤.
Date (Day(30), Month(3), Year(1995);  // μ—λ¬! νƒ€μ…μ΄ ν‹€λ Έμµλ‹λ‹¤.
Date (Month(30), Day(3), Year(1995);  // μ„±κ³µ
```

μ±…μ—μ„λ” μ΄κ²ƒμ„ μ¨μ „ν• ν΄λμ¤λ΅ λ§λ“¤λ©΄ μ„μ λ‹¨μν• κµ¬μ΅°μ²΄λ³΄λ‹¤ λ‚«λ‹¤κ³  ν•μ§€λ§.. μ΄ λ¶€λ¶„μ—μ„λ” λ„μ–΄κ°€κ² μµλ‹λ‹¤. κ¶κΈν•μ‹  λ¶„λ“¤μ€ ν•­λ© 22λ¥Ό μ°Έμ΅°ν•΄μ£Όμ„Έμ”.

μ„μ²λΌ νƒ€μ…μ„ μ μ ν μ¤€λΉ„ν•΄ λ‘κΈ°λ§ν•΄λ„ μΈν„°νμ΄μ¤ μ‚¬μ© μ—λ¬λ¥Ό λ§‰λ”λ° λ„μ›€μ΄ λ©λ‹λ‹¤

### π© 2. νƒ€μ… μ•μ •μ„±μ„ μ‹ κ²½μ¨μ„ λ§λ“ λ‹¤λ©΄?

μ μ ν• νƒ€μ…μ΄ μ¤€λΉ„λμ–΄ μλ‹¤λ©΄, **κ° νƒ€μ…μ κ°’μ— μ μ•½**μ„ κ°€ν•λ”λΌλ„ κ΄μ°®μ€ κ²½μ°κ°€ λκ² μ§€μ”??
β†’ μ›”(ζ)μ΄ κ°€μ§ μ μλ” μ ν¨ν• κ°’μ€ 12κ°λΏ β†’ Month νƒ€μ…μ€ μ΄ μ‚¬μ‹¤μ„ μ μ•½μΌλ΅ μ‚¬μ©ν•  μ μμ!

```cpp
class Month
{
public:
  static Month Jan() {  return Month(1);} // μ ν¨ν• Month κ°’μ„ λ°ν™ν•λ” ν•¨μλ“¤
  ...                                     // μ΄λ“¤μ΄ μ–΄μ§Έμ„ ν•¨μλ΅ λμ–΄μμΌλ©°
  static Month Dec() {  return Month(12);}// κ°μ²΄κ°€ λλ©΄ μ•λλ”μ§€μ— λ€ν• μ΄μ•ΌκΈ°λ”
	...                                     // μ•„λλ¥Ό λ³΄λ©΄ μμµλ‹λ‹¤.
private:                    
  explicit Month(int m);                  // Month κ°’μ΄ μƒλ΅ μƒμ„±λμ§€ μ•λ„λ΅
  ...                                     // λ…μ‹νΈμ¶ μƒμ„±μκ°€ private λ©¤λ²„μ…λ‹λ‹¤
};                                        // μ›” ν‘ν„μ„ μ„ν• λ‚΄λ¶€ λ°μ΄ν„°

Date d(Month::Jan(), Day(30), Year(1995));`
```

1. **μ™ `Month::Jan` μ„ κ°μ²΄κ°€ μ•„λ‹λΌ ν•¨μλ΅ λ§λ“¤μ—μ„κΉ?**
    
    λ³΄ν†µμ΄λΌλ©΄ μ•„λμ™€ κ°™μ΄ μ‚¬μ©ν•κ³  μ‹¶μ„ μ μμµλ‹λ‹¤.
    
    ```cpp
    class Month {
    public:
        static const Month Jan; // μ •μ  κ°μ²΄: ν”„λ΅κ·Έλ¨ μ „μ²΄μ— ν•λ‚λ§ μ΅΄μ¬
        static const Month Feb;
        ...
    };
    
    const Month Month::Jan(1);
    const Month Month::Feb(2);
    ```
    
    μ΄λ ‡κ² ν•λ©΄ `Month::Jan` μ΄λΌλ” κ°μ²΄λ¥Ό μ§μ ‘ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.
    ν•μ§€λ§ **λ¬Έμ μ **μ΄ μ΅΄μ¬ν•©λ‹λ‹¤.
    
    - `Month::Jan` κ°™μ€ **μ •μ  κ°μ²΄(static object)**λ” ν”„λ΅κ·Έλ¨ μ‹μ‘ μ‹ μ΄κΈ°ν™”λΌμ•Ό ν•¨
    - `ν•­λ©4` λ¥Ό μ‚΄ν΄λ³΄λ©΄β€¦
        
        > λΉ„μ§€μ—­ μ •μ  κ°μ²΄ μ΄κΈ°ν™” μμ„ **μ •μλμ§€ μ•μ** β†’ μ„ν—
        > 
        
        μ΄λΌκ³  μ–ΈκΈ‰λμ–΄ μμµλ‹λ‹¤!
        
    - C++μ—μ„λ” λΉ„μ§€μ—­ μ •μ  κ°μ²΄μ μ΄κΈ°ν™” μμ„κ°€ μ—¬λ¬ λ²μ—­ λ‹¨μ„(.cppνμΌ) κ°„μ— λ³΄μ¥λμ§€ μ•μ
    β†’ μ¦‰, λ‹¤λ¥Έ μ†μ¤ νμΌμ—μ„ `Month::Jan`μ„ μ‚¬μ©ν•λ ¤κ³  ν•  λ• **μ•„μ§ μ΄κΈ°ν™”λμ§€ μ•μ•μ„ μ μμ!**

1. **ν•¨μλ΅ λ§λ“  κ²½μ°μ μ¥μ **
    
    ```cpp
    static Month Jan() { return Month(1); }
    ```
    
    - μ΄κ±΄ κ°μ²΄κ°€ μ•„λ‹κ³  `μ •μ  ν•¨μ`
    - νΈμ¶λ  λ•λ§λ‹¤ `Month(1)`μ΄λΌλ” **μ„μ‹ κ°μ²΄$^*$**λ¥Ό λ°ν™
        
        **$^*$** μ„μ‹κ°μ²΄: μ κΉ μ‚¬μ©λμ—λ‹¤κ°€, μ‚¬μ©μ΄ λλ‚λ©΄ λ°”λ΅ μ†λ©Έλλ” κ°μ²΄, λ¦¬ν„°λ΄ κ°’, ν•¨μ λ°ν™ κ°’
        
    - λ”°λΌμ„ **λΉ„μ§€μ—­ μ •μ  κ°μ²΄ μ΄κΈ°ν™” μμ„ λ¬Έμ **λ¥Ό ν”Όν•΄κ° μ μμ!
    - C++ν‘μ¤€μ— λ”°λΌ ν•¨μλ” μ–Έμ λ“ μ§€ μ•μ „ν•κ² νΈμ¶ κ°€λ¥ν•λ‹κΉ, **μ΄κΈ°ν™” μμ„ λ¬Έμ μ—μ„ μμ λ΅μ›μ§**

<aside>

π’΅ **enum νƒ€μ…μ„ μ“°λ©΄ μ•λλ‚μ”?**

enumμ„ λ„£λ” λ°©λ²•μ΄ μκΈ΄ν•λ° νƒ€μ… μ•μ •μ„±μ€ κ·Έλ¦¬ λ―Ώμμ§ν•μ§€ λ»ν•λ‹¤κ³  ν•©λ‹λ‹¤.

1. `enum` λ°©μ‹μ ν•κ³„

```cpp
enum Month { Jan=1, Feb, Mar, Apr, May, Jun, 
             Jul, Aug, Sep, Oct, Nov, Dec };

void printMonth(Month m) {
    // μ½”λ“...
}

printMonth(Jan);   // β… μ •μƒ
printMonth(13);    // β μ»΄νμΌλ¬κ°€ λ§‰μ§€ λ»ν•¨! (μ•”λ¬µμ  λ³€ν™ ν—μ©)
```

- `enum` μ€ μ‚¬μ‹¤μƒ intμ™€ νΈν™λΌμ„, `printMonth(13)`  κ°™μ€ μ—‰ν„°λ¦¬ κ°’λ„ μ „λ‹¬ κ°€λ¥
β†’ μ΄ λ¶€λ¶„μ΄ **νƒ€μ… μ•μ •μ„±μ΄ λ―Ώμμ§μ¤λ½μ§€ λ»ν•λ‹¤**λ” μ΄μ 
- μΈν„°νμ΄μ¤κ°€ μ—‰ν„°λ¦¬λ΅ μ“°μΌ μ„ν—μ΄ μ»¤μ§

1. ν΄λμ¤λ΅ `Month`λ¥Ό λ§λ“  κ²½μ°
    
    ```cpp
    class Month
    {
    public:
      static Month Jan() {  return Month(1);} // μ ν¨ν• Month κ°’μ„ λ°ν™ν•λ” ν•¨μλ“¤
      ...                                     // μ΄λ“¤μ΄ μ–΄μ§Έμ„ ν•¨μλ΅ λμ–΄μμΌλ©°
      static Month Dec() {  return Month(12);}// κ°μ²΄κ°€ λλ©΄ μ•λλ”μ§€μ— λ€ν• μ΄μ•ΌκΈ°λ”
    	...                                     // μ•„λλ¥Ό λ³΄λ©΄ μμµλ‹λ‹¤.
    private:                    
      explicit Month(int m);                  // Month κ°’μ΄ μƒλ΅ μƒμ„±λμ§€ μ•λ„λ΅
      ...                                     // λ…μ‹νΈμ¶ μƒμ„±μκ°€ private λ©¤λ²„μ…λ‹λ‹¤
    };                                        // μ›” ν‘ν„μ„ μ„ν• λ‚΄λ¶€ λ°μ΄ν„°
    
    Date d(Month::Jan(), Day(30), Year(1995));
    ```
    
    - μ΄λ ‡κ² λ§λ“¤λ©΄ **ν—μ©λ κ°’λ§ λ§λ“¤ μ μλ„λ΅ μ μ•½** κ°€λ¥
    - `int` μ™€ μ•”λ¬µ λ³€ν™λμ§€ μ•μ β†’ μλ»λ κ°’ μ „λ‹¬μ΄ λ¶κ°€λ¥
    - `enum`λ³΄λ‹¤ ν• λ‹¨κ³„ λ” λ‚μ•„κ°€μ„, **κ°•ν™”λ νƒ€μ…(ν΄λμ¤λ΅ μΊ΅μν™”ν• Month)**μ„ μ“°λ©΄ μ§„μ§ μ•μ „ν•΄μ§€λ” κ²ƒμ„
</aside>

### π© 3. μ μ•½μ„ λ¶€μ—¬ν•μ

μμƒλλ” μ‚¬μ©μ μ‹¤μλ¥Ό λ§‰λ” λ‹¤λ¥Έ λ°©λ²•μΌλ΅λ” μ–΄λ–¤ νƒ€μ…μ΄ **μ μ•½μ„ λ¶€μ—¬ν•μ—¬ κ·Έ νƒ€μ…μ„ ν†µν•΄ ν•  μ μλ” μΌλ“¤μ„ λ¬¶μ–΄ λ²„λ¦¬λ” λ°©λ²•**μ΄ μμµλ‹λ‹¤.

μ•„μ£Ό ν”ν μ“°μ΄λ” μλ” `const` λ¶™μ΄κΈ° μ…λ‹λ‹¤. μ΄ λ¶€λ¶„μ€ `ν•­λ©3` μ„ μ°Έκ³ ν•λ©΄ λ„μ›€λ©λ‹λ‹¤.

> **constμ™€ ν•¨μ**
> 
> 
> ν•¨μ μ„ μ–Έλ¬Έμ— μμ–΄μ„ constλ” ν•¨μ λ°ν™ κ°’, κ°κ°μ λ§¤κ°λ³€μ, λ©¤λ²„ ν•¨μ μ•μ— λ¶™μ„ μ μκ³ , ν•¨μ μ „μ²΄μ— λ€ν•΄ constμ μ„±μ§μ„ λ¶™μΌ μ μμ.
> 
> ν•¨μ λ°ν™ κ°’μ„ μƒμλ΅ μ •ν•λ©΄, **μ•μ „μ„±μ΄λ‚ ν¨μ¨μ„ ν¬κΈ°ν•μ§€ μ•κ³ λ„ μ‚¬μ©μμΈ΅μ μ—λ¬ λλ° μƒν™©μ„ μ¤„μ΄λ” ν¨κ³Ό**
> 
> ```cpp
> class Rational {...};
> const Rational operator*(const Rational& lhs, const Rational& rhs);
> ```
> 

`ν•­λ©3`μ— μ •λ¦¬λ κ²ƒ μ²λΌ `operator*` μ λ°ν™ νƒ€μ…μ„ `const`λ΅ ν•μ •ν•¨μΌλ΅μ¨ μ‚¬μ©μκ°€ μ‚¬μ©μ μ •μ νƒ€μ…μ— λ€ν•΄ λ‹¤μκ³Ό κ°™μ€ μ‹¤μλ¥Ό μ €μ§€λ¥΄μ§€ μ•λ„λ΅ ν•  μ μμµλ‹λ‹¤.

1. **const λ¶™μ΄κΈ° μμ‹**
    
    ```cpp
    if (a * b = c) // ν‘, λ‚λ” μ›λ λΉ„κµν•λ ¤κ³  κ·Έλ¬λ κ±΄λ°!
    ```
    
    - μ„ μ½”λ“ κ°™μ€ κ²½μ°, λΉ„κµ(`==`)ν•λ ¤λ κ±΄λ° μ‹¤μλ΅ λ€μ… (`=`)ν• κ²½μ°, λ°ν™ νƒ€μ…μ΄ `const` λΌλ©΄ μ΄λ° μλ»λ λ€μ…μ„ λ§‰μ„ μ μμµλ‹λ‹¤
    - λ§μ•½, `operator*` κ°€ **λΉ„-const κ°μ²΄λ¥Ό λ°ν™**ν•λ‹¤λ©΄ `a*b` μ κ²°κ³Ό(μ„μ‹ κ°μ²΄)μ— λ€μ…μ΄ κ°€λ¥ν•΄μ Έ λ²„λ¦Ό
    - μ΄ μ½”λ“λ” **μ»΄νμΌ μ—λ¬κ°€ μ•λ‚κ³ , λ…Όλ¦¬ λ²„κ·Έ**λ΅ μ΄μ–΄μ§
    
    μ΄λ° μ μ•½μ€ μ‚¬μ©μκ°€ μλ» μ“Έ μ μλ” κΈΈμ„ μΌλ¶€λ¬ λ§‰μ•„μ£Όλ” μ¥μΉμ…λ‹λ‹¤.
    μ¦‰, **μΌλ°μ μΈ μ¬λ°”λ¥Έ μ‚¬μ©μ€ νΈν•κ², μλ»λ μ‚¬μ©μ€ μ•„μ λ¶κ°€λ¥ν•κ² λ§λ“λ”κ² λ©μ **μ…λ‹λ‹¤.
    

1. **μΌλ°μ μΈ μ§€μΉ¨**
    - νΉλ³„ν• μ΄μ κ°€ μ—†λ‹¤λ©΄, μ‚¬μ©μκ°€ λ§λ“  νƒ€μ…λ„ **κΈ°λ³Έ μ κ³µ νƒ€μ…(int, double λ“±)μ²λΌ λ™μ‘**ν•κ² ν•λ”κ² μ›μΉ™
    - μ™λƒλ©΄ μ‚¬λλ“¤μ΄ μ΄λ―Έ κΈ°λ³Έ νƒ€μ…μ λ™μ‘μ„ μ μ•κ³  μμ–΄μ„, μ‚¬μ©μ μ •μ νƒ€μ…λ„ κ·Έ κΈ°λ€λ¥Ό κΉ¨λ©΄ νΌλ€μ„ μ¤
    β†’ μ§κ΄€μ—μ„ μ–΄κΈ‹λ‚μ§€ μ•κ² ν•μ!

---

# π“ μΌκ΄€μ„±μλ” μΈν„°νμ΄μ¤ μ κ³µ

### **π© STL μ»¨ν…μ΄λ„μ μΌκ΄€μ„±**

STL μ»¨ν…μ΄λ„μ μΈν„°νμ΄μ¤λ” μΌλ°μ μΌλ΅ μΌκ΄€μ„±μ„ κ°€μ§€κ³  μμµλ‹λ‹¤.
ν• μλ΅, λ¨λ“  STL μ»¨ν…μ΄λ„λ” `size` λ€ λ©¤λ²„ ν•¨μλ¥Ό κ°λ°©ν•΄ λ†“κ³  μμµλ‹λ‹¤.

Javaμ κ²½μ°, λ°°μ—΄μ— λ€ν•΄μ„  `lengh property`λ¥Ό μ‚¬μ©ν•κ³ , Stringμ— λ€ν•΄μ„λ” `lenght method` λ¥Ό λ¶λ¬μ•Όν•λ©° Listμ— λ€ν•΄μ„λ” `size method`λ¥Ό μ“°λ„λ΅ λμ–΄μμµλ‹λ‹¤.

<aside>

π¨  μ‚¬μ©μ μ½μ—μ„ λ­”κ°€λ¥Ό μ™Έμ›μ•Ό μ λ€λ΅ μ“Έ μ μλ” μΈν„°νμ΄μ¤λ” μλ» μ“°κΈ° μ‰½μµλ‹λ‹¤!

</aside>

### π© ν©ν† λ¦¬ ν•¨μλ¥Ό μ‚¬μ©ν• μμ 

<aside>

 π’΅ **ν©ν† λ¦¬ ν•¨μλ€?**

- κ°μ²΄ μƒμ„±μ„ λ€μ‹ ν•΄μ£Όλ” ν•¨μ
- `new` λ‚ `μƒμ„±μ νΈμ¶` μ„ μ§μ ‘ ν•μ§€ μ•κ³ , **μ „μ© ν•¨μ**λ¥Ό ν†µν•΄ κ°μ²΄λ¥Ό λ§λ“λ” λ°©μ‹

```cpp
class Investment {
public:
    virtual ~Investment() {}
    // ...
};

// ν©ν† λ¦¬ ν•¨μ
Investment* createInvestment() {
    // μ–΄λ–¤ μƒν™©μ— λ”°λΌ μ μ ν• νμƒ ν΄λμ¤ κ°μ²΄λ¥Ό λ§λ“¤μ–΄ λ°ν™
}

int main() {
    Investment* inv = createInvestment();
    // ... μ‚¬μ© ...
    delete inv;  // κΉλΉ΅ν•λ©΄ λ©”λ¨λ¦¬ λ„μ λ°μƒ
}
```

- μ‚¬μ©μλ” `new Stock()` κ°™μ€κ±Έ μ§μ ‘ μ“°μ§€ μ•κ³ , `createInvestment()` κ°™μ€ ν©ν† λ¦¬ ν•¨μλ¥Ό ν†µν•΄ κ°μ²΄λ¥Ό λ°›μ
- μ¦‰, **μƒμ„± κ³Όμ •μ„ μΈν„°νμ΄μ¤λ΅ κ°μ‹Έλ” κ²ƒ**μ΄ ν©ν† λ¦¬ ν¨ν„΄μ ν•µμ‹¬
β†’ **μΈν„°νμ΄μ¤ λ‹¨μν™”**
</aside>

ν•μ§€λ§ μ„μ μμ μ™€ κ°™μ΄ μ‚¬μ©ν•κ² λλ‹¤λ©΄ μ‹¤μν•κΈ° μ‰½μµλ‹λ‹¤.
ν¬μΈν„° μ‚­μ λ¥Ό κΉλΉ΅ν•  μ μκ³ , λ‘κ°™μ€ ν¬μΈν„°μ— λ€ν•΄ `delete`κ°€ λ‘ λ² μ΄μƒ μ μ©λ  μ μμ

**μ΄μ— λ€ν• ν•΄κ²°μ±…μ€?**

- ν©ν† λ¦¬ ν•¨μλ” λ°ν™ νƒ€μ…μ„ `auto_ptr`, `shared_ptr` κ°™μ€ μ¤λ§νΈ ν¬μΈν„°λ΅ κ°•μ ν•λ©΄
β†’ **μμ› λ„μκ°€ λ°©μ§€λ¨**
    
    ```cpp
    std::shared_ptr<Investment> createInvestment() {
    		// λ‚΄λ¶€ μ½”λ“
    }
    ```
    
- μ΄λ ‡κ²ν•λ©΄ ν•­μƒ μ•μ „ν• λ°©μ‹μΌλ΅λ§ κ°μ²΄λ¥Ό μ“°λ„λ΅ μΈν„°νμ΄μ¤κ°€ μ ν•λ©λ‹λ‹¤.
- ν•΄λ‹Ή ν¬μΈν„°μ μ‚­μ  μ‘μ—…μ„ μ¤λ§νΈ ν¬μΈν„°μ—κ² λ– λ„κΈ°λ” λ°©λ²•

# π“ shared_ptr

- `tr1::shared_ptr` μ•„λ‹κ°€μ”?
    
    <aside>
    
    **TR1(Technical Report 1)**
    
    - C++ 11 ν‘μ¤€μ΄ λ‚μ¤κΈ° μ „μ—, ν‘μ¤€μ— λ―Έλ¦¬ μ¶”κ°€λ  λΌμ΄λΈλ¬λ¦¬λ¥Ό μ μ•ν•κ³  λ¨μ•„λ‘” β€μ„μ‹ ν™•μ¥νβ€μ…λ‹λ‹¤.
    - C++ 03 μ‹μ μ—λ” μ¤λ§νΈ ν¬μΈν„°κ°€ ν‘μ¤€μ— μ—†μ—μµλ‹λ‹¤
    
    μ¦‰, `tr1::shared_ptr` β‡’ C++11 μ΄μ „μ— μ“°λ μ¤λ§νΈ ν¬μΈν„° κµ¬ν„
    
    μµμ‹  C++μ—μ„λ” μ¤λ§νΈ ν¬μΈν„°κ°€ μ •μ‹ ν‘μ¤€μ— λ“¤μ–΄μ™”μµλ‹λ‹¤.
    `tr1::` μ„ μ‚¬μ©ν•μ§€ μ•μ•„λ„ λκ³ , μµμ‹  μ»΄νμΌλ¬μ—μ„λ” μ•„μ μ§€μ›μ΄ μ•λ μλ„ μμµλ‹λ‹¤.
    
    </aside>
    

### **π© shared_ptr μμ **

- `createInvestment()`κ°€ `Investment*`λ¥Ό λ°ν™ν•λ©΄ μ‚¬μ©μκ°€ μ§μ ‘ `delete` ν•΄μ•Ό ν•¨.
- μ‹¤μλ΅ `delete`λ¥Ό κΉλΉ΅ν•κ±°λ‚, μλ» νΈμ¶ν•λ©΄ β†’ **μμ› λ„μ / μ¤‘λ³µ ν•΄μ ** λ°μƒ.

β‡’ κ·Έλμ„ μ¤λ§νΈ ν¬μΈν„°(`shared_ptr`)λ¥Ό λ°ν™ν•λ” κ² μ•μ „.

**1. μ‚¬μ©μ μ •μ μ‚­μ μ(custom deleter)**

`ν•­λ©14` μ—μ„ λ‚μ¨κ²ƒμ²λΌ `shared_ptr` μ€ μƒμ„± μ‹μ μ— **μ‚­μ μλ¥Ό μ§μ ‘ μ—®μ„ μ μλ” κΈ°λ¥**μ„ κ°€μ§€κ³  μμµλ‹λ‹¤.

μ΄λ¬ν• κΈ°λ¥μ„ μ΄μ©ν•μ—¬ `createInvestment` λ¥Ό ν†µν•΄ μ–»μ€ `Investment*` ν¬μΈν„°λ¥Ό μ§μ ‘ μ‚­μ ν•μ§€ μ•κ³ , `getRidOfInvestment` μ΄λ¦„μ ν•¨μλ¥Ό μ¤€λΉ„ν•μ—¬ μ—¬κΈ°μ— λ„κΈ°λ©΄ μ–΄λ–»κ²λ κΉμ”?

λ³΄κΈ°μ—λ” κΉ”λ”ν•΄λ³΄μ΄μ§€λ§, μ‹¤μν•κ² λ  κ°€λ¥μ„±μ΄ λ” μ»¤μ§€κ²λ©λ‹λ‹¤. λ§λ“¤μ–΄λ‘” `getRidOfInvestment` λ¥Ό μ‚¬μ©ν•μ§€ μ•κ³  `delete` λ¥Ό μ¨λ²„λ¦΄ μλ„ μμµλ‹λ‹¤.

1. `shared_ptr` **μ‚­μ μ μ‚¬μ©**
    
    `shared_ptr` μ—λ” λ‘ κ°μ μΈμλ¥Ό λ°›λ” μƒμ„±μκ°€ μμµλ‹λ‹¤.
    
    - μ²«λ²μ§Έ μΈμ β†’ κ΄€λ¦¬ν•  ν¬μΈν„°
    - λ‘λ²μ§Έ μΈμ β†’ μ°Έμ΅° μΉ΄μ΄νΈκ°€ 0μ΄ λ  λ• νΈμ¶λλ” μ‚­μ μ
    
    `shared_ptr` μ΄ `null` ν¬μΈν„°λ¥Ό λ¬Όκ²ν•¨κ³Ό λ™μ‹μ— μ‚­μ μ`getRidOfInvestment` λ¥Ό κ°–κ²ν•λ” λ°©λ²•μ€ μ–΄λ–¨κΉμ”?
    
    ```cpp
    std::shared_ptr<Investment> pInv(0, getRidOfInvestment); // μ»΄νμΌμ΄ μ•λ©λ‹λ‹¤
    ```
    
    μ²« λ²μ§Έ μΈμμΈ `0`μ€ ν¬μΈν„°κ°€ μ•„λ‹κ³  `int`μ…λ‹λ‹¤.
     `shared_ptr` μ΄ μ”κµ¬ν•λ” ν¬μΈν„°λ” `Investment*` νƒ€μ…μ μ‹¤μ  ν¬μΈν„°λ¥Ό μ”κµ¬ν•©λ‹λ‹¤
    
    λ”°λΌμ„ **μΊμ¤νΈ**λ¥Ό μ μ©ν•μ—¬ ν•΄κ²°ν•©λ‹λ‹¤.
    
    ```cpp
    std::shared_ptr<Investment>
        pInv(static_cast<Investment*>(0), getRidOfInvestment);
    ```
    
    - **cast**
        
        `ν•­λ©27`μ— λ‚μ¤κΈ΄ ν•¨
        
        1. **μΊμ¤νΈλ€?**
            - **νƒ€μ… λ³€ν™(type conversion)**μ„ κ°•μ λ΅ μ‹ν‚¤λ” λ°©λ²•
            - μ»΄νμΌλ¬κ°€ μλ™μΌλ΅ λ³€ν™ν•μ§€ μ•λ” κ²½μ°μ—λ„, κ°λ°μκ°€ β€μ΄ νƒ€μ…μΌλ΅ μ·¨κΈ‰ν•΄!β€λΌκ³  μ§€μ‹ν•λ” κ²ƒ
            - μ¦‰, **κ°•μ  ν•λ³€ν™**
        2. μΊμ¤ν…μ μ£Όμμ‚¬ν•­
            - μΊμ¤νΈλ” κ°€λ¥ν• ν”Όν•λ”κ² μΆ‹κ³  κΌ­ ν•„μ”ν•  λ•λ§ μ¨μ•Όν•¨
            - **νƒ€μ… μ‹μ¤ν…μ„ λ¬΄μ‹**ν•κΈ° λ•λ¬Έμ— β†’ μ•μ „μ„± β†“
            - **μ½”λ“ κ°€λ…μ„± μ €ν•** β†’ μ μ§€λ³΄μ μ–΄λ ¤μ›€
            - μλ» μ“°λ©΄ **μ •μλμ§€ μ•μ€ λ™μ‘(UB)** λ°μƒ
            
        
        μ—¬κΈ°μ„λ” μƒμ„±μκ°€ μ›ν•λ” νƒ€μ…μ„ λ§μ¶”κΈ° μ„ν•΄ μ“°λ”κ±°λΌ κ΄μ°®λ‹¤κ³ ν•¨
        
    
    <aside>
    
    π€ κ·Όλ° C++11 μ΄μƒμ—μ„λ” `nullptr`μ΄ μμ–΄μ„ μΊμ¤νΈλ¥Ό κµ³μ΄ μ“Έ ν•„μ” μ—†λ‹¤κ³  ν•¨
    
    </aside>
    

### π© per-pointer μ‚­μ μ(Deleter)κ°€ μ™ μΆ‹μ€κ°€?

`shared_ptr` μ€ ν¬μΈν„°λ§λ‹¤ β€μ‚­μ  λ°©λ²•β€μ„ ν•¨κ» μ €μ¥ν•  μ μμµλ‹λ‹¤.

```cpp
std::shared_ptr<Investment> p{ new Stock, getRidOfInvestment };
// λ§μ§€λ§‰ ν•λ‚κ°€ νκ΄΄λ  λ• getRidOfInvestment(ptr) νΈμ¶
```

- μ΄λ ‡κ² ν•λ©΄ μ‚¬μ©μκ°€ `delete` λ¥Ό κΉλΉ΅ν•  μ„ν—μ΄ μ—†μ–΄μ§ β†’ μλ™ ν•΄μ 
- νΉμν• ν•΄μ  μ μ°¨(μ: λ΅κ·Έ λ‚¨κΈ°κΈ°)λ¥Ό κ°•μ ν•  μ μμ

### π© cross-DLL λ¬Έμ 

μ„λ΅ λ‹¤λ¥Έ DLL μ‚¬μ΄μ—μ„ new/delete μ§μ΄ μ—‡κ°λ¦¬λ” λ¬Έμ 

- κ°μ²΄λ¥Ό **DLL A**μ—μ„ `new`λ΅ λ§λ“¤κ³ , **DLL B**μ—μ„ `delete`ν•λ©΄
    
    κ° DLLμ΄ **λ‹¤λ¥Έ λ°νƒ€μ„/ν™**μ„ μ“°λ” ν™κ²½μ—μ„  ν¬λμ‹κ°€ λ‚κΈ° μ‰½μµλ‹λ‹¤.
    
- `shared_ptr`μ€ **ν¬μΈν„°λ§λ‹¤ μ‚­μ μ ν•¨μλ¥Ό μ €μ¥**ν•λ―€λ΅,
    
    κ°μ²΄λ¥Ό λ§λ“  μ½μ—μ„ μ§€μ •ν• β€μ •ν™•ν• μ‚­μ μ(κ·Έ DLLμ delete λλ” μ»¤μ¤ν…€ deleter)β€κ°€
    
    **μ°Έμ΅° μΉ΄μ΄νΈκ°€ 0μ΄ λλ” μ‹μ μ— κ·Έλ€λ΅ νΈμ¶**λ©λ‹λ‹¤.
    
- μ¦‰, `shared_ptr` μΈμ¤ν„΄μ¤κ°€ DLL κ²½κ³„λ¥Ό λ„μ–΄ λ‹¤λ…€λ„,
    
    **λ§μ§€λ§‰ ν•΄μ λ” ν•­μƒ μ¬λ°”λ¥Έ μ‚­μ μ**λ΅ μν–‰λμ–΄ cross-DLL λ¬Έμ λ¥Ό νν”Όν•  μ μμµλ‹λ‹¤.
    

---

# **π“ Appendix**

- ν•­λ© 2 : '#defineβ€™μ„ μ“°λ ¤κ±°λ“  const, enum, inlineμ„ λ– μ¬λ¦¬μ
- ν•­λ© 3 : λ‚μƒλ§ λ³΄μ΄λ©΄ constλ¥Ό λ“¤μ΄λ€μ!
- ν•­λ© 4 : κ°μ²΄λ¥Ό μ‚¬μ©ν•κΈ° μ „μ— λ°λ“μ‹ κ·Έ κ°μ²΄λ¥Ό μ΄κΈ°ν™”ν•μ
- ν•­λ© 13 : μμ› κ΄€λ¦¬μ— κ°μ²΄κ°€ κ·Έλ§!
- ν•­λ© 14 : μμ› κ΄€λ¦¬ ν΄λμ¤μ λ³µμ‚¬ λ™μ‘μ— λ€ν•΄ μ§„μ§€ν•κ² κ³ μ°°ν•μ
- ν•­λ© 22 : λ°μ΄ν„° λ©¤λ²„κ°€ μ„ μ–Έλ  κ³³μ€ private μμ—­μ„μ„ λ…μ‹¬ν•μ
- ν•­λ© 26 : λ³€μ μ •μλ” λ¦μ¶ μ μλ” λ°κΉμ§€ λ¦μ¶”λ” κ·Όμ„±μ„ λ°νν•μ
- ν•­λ© 55 : μ»΄νμΌλ¬ κ²½κ³ λ¥Ό μ§€λ‚μΉμ§€λ§μ