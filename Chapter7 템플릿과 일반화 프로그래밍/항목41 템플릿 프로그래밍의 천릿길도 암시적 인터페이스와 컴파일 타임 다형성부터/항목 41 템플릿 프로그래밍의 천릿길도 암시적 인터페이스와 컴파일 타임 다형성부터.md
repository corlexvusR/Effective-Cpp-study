# ν•­λ© 41: ν…ν”λ¦Ώ ν”„λ΅κ·Έλλ°μ μ²λ¦ΏκΈΈλ„ μ•”μ‹μ  μΈν„°νμ΄μ¤μ™€ μ»΄νμΌ νƒ€μ„ λ‹¤ν•μ„±λ¶€ν„° - μ‘μ„±μ: μ„μμ€

<aside>

# π” μ”μ•½

- ν΄λμ¤ λ° ν…ν”λ¦Ώμ€ λ¨λ‘ μΈν„°νμ΄μ¤μ™€ λ‹¤ν•μ„±μ„ μ§€μ›ν•λ‹¤.
- `ν΄λμ¤`μ κ²½μ°, **μΈν„°νμ΄μ¤λ” λ…μ‹μ **μ΄λ©° **ν•¨μμ μ‹κ·Έλ‹μ²λ¥Ό μ¤‘μ‹¬μΌλ΅ κµ¬μ„±**λμ–΄ μλ‹¤.
  **λ‹¤ν•μ„±μ€ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘μ— κ°€μƒ ν•¨μλ¥Ό ν†µν•΄** λ‚νƒ€λ‚λ‹¤.
- `ν…ν”λ¦Ώ λ§¤κ°λ³€μ`μ κ²½μ°, **μΈν„°νμ΄μ¤λ” μ•”μ‹μ **μ΄λ©° **μ ν¨ ν‘ν„μ‹μ— κΈ°λ°μ„ λ‘μ–΄ κµ¬μ„±**λλ‹¤.
**λ‹¤ν•μ„±μ€ μ»΄νμΌ μ¤‘μ— ν…ν”λ¦Ώ μΈμ¤ν„΄μ¤ν™”μ™€ ν•¨μ μ¤λ²„λ΅λ”© λ¨νΈμ„± ν•΄κ²°μ„ ν†µν•΄** λ‚νƒ€λ‚λ‹¤.
</aside>

---

# π“ ν΄λμ¤μ™€ ν…ν”λ¦Ώ

## ν΄λμ¤

```cpp
class Widget {
public:
	Widget();
	virtual ~Widget();
	virtual std::size_t size() const;
	virtual void normalize();
	void swap(Widget& other);
	...
};

void doProcessing(Widget& w)
{
	if(w.size() > 10 && w != someNastyWidget)
	{
		Widget temp(w);
		temp.normalize();
		temp.swap(w);
	}
}
```

### doProcessing ν•¨μ μ•μ— μλ” wμ— λ€ν•μ—¬

- **`λ…μ‹μ  μΈν„°νμ΄μ¤(explicit interface)`**
  - wλ” Widget νƒ€μ…μΌλ΅ μ„ μ–Έλμ—κΈ° λ•λ¬Έμ—, wλ” Widget μΈν„°νμ΄μ¤λ¥Ό μ§€μ›ν•΄μ•Ό ν•¨.
    μ΄ μΈν„°νμ΄μ¤λ” μ†μ¤ μ½”λ“μ—μ„ μ°ΎμΌλ©΄ μ–΄λ–¤ ν•νƒμΈμ§€ ν™•μΈν•  μ μμ.
  - μ†μ¤ μ½”λ“μ— λ…μ‹μ μΌλ΅ λ“λ¬λ‚λ” μΈν„°νμ΄μ¤.
- **`λ°νƒ€μ„ λ‹¤ν•μ„±(runtime polymorphism)`**
  - Widgetμ λ©¤λ²„ ν•¨μ μ¤‘ λ‡ κ°λ” κ°€μƒ ν•¨μμ΄λ―€λ΅, μ΄ κ°€μƒ ν•¨μμ— λ€ν• νΈμ¶μ€ **λ°νƒ€μ„ λ‹¤ν•μ„±**μ— μν•΄ μ΄λ£¨μ–΄μ§.
  - νΉμ • ν•¨μμ— λ€ν• μ‹¤μ  νΈμ¶μ€ wμ λ™μ  νƒ€μ…μ„ κΈ°λ°μΌλ΅ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘, μ¦‰ λ°νƒ€μ„μ— κ²°μ •λ¨.

## ν…ν”λ¦Ώ

```cpp
template<typename T>
void doProcessing(T& w)
{
	if(w.size() > 10 && w != someNastyWidget)
	{
		T temp(w);
		temp.normalize();
		temp.swap(w);
	}
}
```

### doProcessing ν…ν”λ¦Ώ μ•μ— μλ” wμ— λ€ν•μ—¬

- **`μ•”μ‹μ  μΈν„°νμ΄μ¤(implicit interface)`**
  - wκ°€ μ§€μ›ν•΄μ•Ό ν•λ” μΈν„°νμ΄μ¤λ” μ΄ ν…ν”λ¦Ώ μ•μ—μ„ wμ— λ€ν•΄ μ‹¤ν–‰λλ” μ—°μ‚°μ΄ κ²°μ •ν•¨.
    μ§€κΈμ κ²½μ° size, normalize, swap λ©¤λ²„ ν•¨μλ¥Ό μ§€μ›ν•΄μ•Ό ν•λ” wμ νƒ€μ…, μ¦‰ Tμ„.
  - κ·ΈλΏ μ•„λ‹λΌ Tλ” λ³µμ‚¬ μƒμ„±μ μ§€μ› (temp λ§λ“¤κΈ°),
    λ¶€λ“± λΉ„κµλ¥Ό μ„ν• μ—°μ‚° μ§€μ› (someNastyWidgetκ³Ό λΉ„κµ) λ“±μ΄ ν•„μ”.
  - μ΄ ν…ν”λ¦Ώμ΄ μ λ€λ΅ μ»΄νμΌλλ ¤λ©΄ λ‡ κ°μ ν‘ν„μ‹μ΄ `μ ν¨(valid)` ν•΄μ•Ό ν•λ”λ°,
    μ΄ ν‘ν„μ‹λ“¤μ€ λ°”λ΅ Tκ°€ μ§€μ›ν•΄μ•Ό ν•λ” μ•”μ‹μ  μΈν„°νμ΄μ¤.
- **`μ»΄νμΌ νƒ€μ„ λ‹¤ν•μ„±(compile-time polymorphism)`**
  - wκ°€ μλ°λλ” **ν•¨μ νΈμ¶μ΄ μΌμ–΄λ‚  λ•**, μ΄λ¥Όν…λ©΄ operator> λ° operator!= ν•¨μκ°€ νΈμ¶λ  λ•λ” ν•΄λ‹Ή νΈμ¶μ„ μ„±κ³µμ‹ν‚¤κΈ° μ„ν•΄ ν…ν”λ¦Ώμ μΈμ¤ν„΄μ¤ν™”κ°€ μΌμ–΄λ‚¨. μ΄λ¬ν• μΈμ¤ν„΄μ¤ν™”κ°€ μΌμ–΄λ‚λ” μ‹μ μ€ μ»΄νμΌ λ„μ¤‘.
  - μΈμ¤ν„΄μ¤ν™”λ¥Ό μ§„ν–‰ν•λ” ν•¨μ ν…ν”λ¦Ώμ— μ–΄λ–¤ ν…ν”λ¦Ώ λ§¤κ°λ³€μκ°€ λ“¤μ–΄κ°€λλƒμ— λ”°λΌ νΈμ¶λλ” ν•¨μκ°€ λ‹¬λΌμ§.

# π“ λ…μ‹μ  μΈν„°νμ΄μ¤μ™€ μ•”μ‹μ  μΈν„°νμ΄μ¤

## λ…μ‹μ  μΈν„°νμ΄μ¤ (explicit interface)

ν•¨μ μ‹κ·Έλ‹μ²λ΅ μ΄λ£¨μ–΄μ§.

- **`μ‹κ·Έλ‹μ²`**: ν•¨μ μ΄λ¦„, λ§¤κ°λ³€μ νƒ€μ…, λ°ν™ νƒ€μ… λ“±

```cpp
class Widget {
public:
	Widget();
	virtual ~Widget();
	virtual std::size_t size() const;
	virtual void normalize();
	void swap(Widget& other);
	...
};
```

- Widgetμ public μΈν„°νμ΄μ¤λ” μƒμ„±μ, μ†λ©Έμ, sizeγ€®normalizeγ€®swap ν•¨μ, ν•¨μμ λ§¤κ°λ³€μ νƒ€μ…, λ°ν™ νƒ€μ… λ° κ° ν•¨μμ μƒμμ„± μ—¬λ¶€λ΅ μ΄λ£¨μ–΄μ§.
- μ»΄νμΌλ¬κ°€ μλ™μΌλ΅ λ§λ“  λ³µμ‚¬ μƒμ„±μμ™€ λ³µμ‚¬ λ€μ…μ—°μ‚°μλ„ ν¬ν•¨.
- typedef νƒ€μ…μ΄ μμΌλ©΄ κ·Έκ²ƒλ„ ν¬ν•¨λ¨.

## μ•”μ‹μ  μΈν„°νμ΄μ¤ (implicit interface)

ν•¨μ μ‹κ·Έλ‹μ²μ— κΈ°λ°ν•κ³  μμ§€ μ•κ³ , **`μ ν¨ ν‘ν„μ‹(expression)`**μΌλ΅ μ΄λ£¨μ–΄μ Έ μμ.

```cpp
template<typename T>
void doProcessing(T& w)
{
	if(w.size() > 10 && w != someNastyWidget)
	{
		...
	}
}
```

**T(wμ νƒ€μ…)μ—μ„ μ κ³µλ  μ•”μ‹μ  μΈν„°νμ΄μ¤μ— κ±Έλ¦¬λ” μ μ•½**

1. μ •μ κ³„μ—΄μ κ°’μ„ λ°ν™ν•κ³  μ΄λ¦„μ΄ sizeμΈ ν•¨μλ¥Ό μ§€μ›ν•΄μ•Ό ν•¨.
2. T νƒ€μ…μ κ°μ²΄ λ‘μ„ λΉ„κµν•λ” operator != ν•¨μλ¥Ό μ§€μ›ν•΄μ•Ό ν•¨.

κ·Όλ°, μ‹¤μ λ΅λ” μ—°μ‚°μ μ¤λ²„λ΅λ”©μ κ°€λ¥μ„±μ΄ μκΈ° λ•λ¬Έμ— Tλ” μ„ μ μ•½ μ¤‘ μ–΄λ–¤ κ²ƒλ„ λ§μ΅±μ‹ν‚¬ ν•„μ” μ—†μ.

**μ μ•½μ„ λ§μ΅±μ‹ν‚¬ ν•„μ” μ—†λ” μ΄μ **

**1λ²μ§Έ μ μ•½μ κ²½μ°**

- Tκ°€ size λ©¤λ²„ ν•¨μλ¥Ό μ§€μ›ν•΄μ•Ό ν•λ” κ²ƒμ€ λ§μ. κ·Έλ¬λ‚ μ΄ λ©¤λ²„ ν•¨μλ” μμΉ νƒ€μ…μ„ λ°ν™ν•  ν•„μ”λ” μ—†μ.
  operator>μ μ •μμ— ν•„μ”ν• νƒ€μ…λ„ λ°ν™ν•  ν•„μ” μ—†μ.
- size λ©¤λ²„ ν•¨μλ” μ–΄λ–¤ X νƒ€μ…μ κ°μ²΄μ™€ intκ°€ ν•¨κ» νΈμ¶λ  μ μλ” operator>κ°€ μ„±λ¦½λ  μ μλ„λ΅, X νƒ€μ…μ κ°μ²΄λ§ λ°ν™ν•λ©΄ λ¨.
- ν•νΈ operator> ν•¨μλ” λ°λ“μ‹ X νƒ€μ…μ λ§¤κ°λ³€μλ¥Ό λ°›μ•„λ“¤μΌ ν•„μ” μ—†μ.
  ν•¨μκ°€ Y νƒ€μ…μ λ§¤κ°λ³€μλ¥Ό λ°›λ„λ΅ μ •μλμ–΄ μκ³ , X νƒ€μ…μ—μ„ Y νƒ€μ…μΌλ΅ μ•”μ‹μ  λ³€ν™μ΄ κ°€λ¥ν•λ‹¤λ©΄ κ΄μ°®μ.

**2λ²μ§Έ μ μ•½μ κ²½μ°**

- operator!= ν•¨μκ°€ X νƒ€μ…μ κ°μ²΄ ν•λ‚μ™€ Y νƒ€μ…μ κ°μ²΄ ν•λ‚λ¥Ό λ°›μ•„λ“¤μΈλ‹¤κ³  ν•λ©΄ λ¬Έμ κ°€ μ—†μ.
- Tκ°€ Xλ΅ λ³€ν™λ  μ μμΌλ©° someNastyWidgetμ νƒ€μ…μ΄ Yλ΅ λ³€ν™λλ” κ²ƒμ΄ κ°€λ¥ν•λ‹¤λ©΄ operator!= ν•¨μμ νΈμ¶μ€ μ ν¨ νΈμ¶λ΅ κ°„μ£Όλ  κ²ƒ.
- λ‹¨, operator&& ν•¨μκ°€ μ¤λ²„λ΅λ“ λ  κ°€λ¥μ„±μ„ μ—Όλ‘μ— λ‘μ§€ μ•μ€ κ²ƒμ΄λΌ, μ΅°κ±΄λ¬Έμ &&κ°€ λ…Όλ¦¬κ³±μ΄ μ•„λ‹λΌλ©΄ μ–κΈ°κ°€ λ‹¬λΌμ§ κ²ƒ.
